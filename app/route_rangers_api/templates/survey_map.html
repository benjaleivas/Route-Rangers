{% extends 'basetemplate_internal.html' %}
{% load static %}
{% block content %}

<div class="headers">
  <h1>{{ City }} Rider Survey</h1>
  <p class="inline">
    Please enter the trips you frequently take on transit, bike, or by car.
    Click on the map to drop a start pin and then click to add a pin where the
    trip ends. This feedback will be used to assess gaps in current transit
    routes. We will ask you some follow-up questions to better understand
    whether a new transit route would make this trip easier for you. Please
    enter up to three routes.
  </p>
</div>
<style>
  .map {
      position: absolute;
      /* width: 100%;
      height: 100%; */
  }
  .leaflet-routing-alternatives-container {
      display: none;
  }
  .export-button {
      background: #edeeed;
      padding: 5px;
      cursor: pointer;
      margin-left: auto;
      width: 100%;
      text-align: center;
      font-weight: bold;
  }
</style>
{% block map %} 
<div id="map" class="map"></div>

<script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder@latest/dist/Control.Geocoder.js"></script>
<script src="{% static 'main.js' %}"></script>
<script type="module">
  var coordinates = {{ coordinates | safe }};
  console.log("coordinates: ", coordinates)
  initializeUserRoute(coordinates);
</script>
{% endblock %}
{% block survey %}
<div class="headers survey-block">
  <form method="post">
    {% csrf_token %} 
    {{ form }}
    <input type="hidden" id="lineStringInput" name="lineString">
    <div style="text-align: right">
      <button class="btn btn-secondary-subtle" type="submit" style="margin-top: 25px">Next</button>
    </div>
  </form>
</div>
{% endblock %}
{% endblock %}